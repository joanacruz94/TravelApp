<h1>Page for translation</h1>

<form action="/logged/utilities/translation" method="POST">
    <textarea id="speech-text" name="text" cols="100" rows="10" value="{{ translated }}"></textarea>
    <input id="translate" type="submit" value="Translate"/>
</form>
<img onclick="startDictation()" witdh="150" height="150" src="https://assets.dryicons.com/uploads/icon/svg/6122/bef13daa-e9a2-4855-9552-5a274a59f119.svg"/>

<script src="https://code.responsivevoice.org/responsivevoice.js?key=qNPkUHT3"></script>
<script>
    const $translate = document.getElementById('translate');
    $translate.addEventListener('click', () => { 
        const text = document.getElementById('speech-text').value;
        console.log(translated);
        responsiveVoice.speak(text); 
    });
</script>

<script>

    let lang = "en-GB";
    function startDictation() {

        if (window.hasOwnProperty('webkitSpeechRecognition')) {

        var recognition = new webkitSpeechRecognition();

        recognition.continuous = false;
        recognition.interimResults = false;
    
        recognition.lang = lang;
        recognition.start();

        recognition.onresult = function(e) {
            const $speechT = document.getElementById("speech-text");
            $speechT.value = e.results[0][0].transcript;

            recognition.stop();
        };

        recognition.onerror = function(e) {
            recognition.stop();
        }

        }
    }


</script>
