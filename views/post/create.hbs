
<h2>Your Post</h2>
<form class="createPost" action="" method="POST" enctype="multipart/form-data">
  <div class="form-group">
    <label for="input-title"><p id="labelSize">Title</p></label>
    <input type="text" name="title" class="form-control form-control-lg" id="input-title" placeholder="Choose a Title for your post">
  </div>
  <div class="form-group">
    <label for="input-description"><p id="labelSize">Description</p></label>
    <textarea class="form-control form-control-lg" name="description" id="input-description" rows="4" placeholder="Post description"></textarea>
  </div>
  <div class="form-group">
    <label for="type"><p id="labelSize">Type of Post</p></label>
    <select name="type" id="input-type" class="form-control form-control-lg">
      <option value="Restaurant">Restaurant</option>
      <option value="Bar">Bar</option>
      <option value="Hotel">Hotel</option>
      <option value="Museum">Museum</option>
      <option value="Landscape">Landscape</option>
      <option value="Beach">Beach</option>
      <option value="City">City</option>
      <option value="Other">Other</option>
  </select>
  </div>

  <div class="form-group">
    <label for="pricerange"><p id="labelSize">Price Range</p></label>
    <select name="priceRange" id="input-price" class="form-control form-control-lg">
      <option value="Cheap">Cheap</option>
      <option value="Medium">Medium</option>
      <option value="Expensive">Expensive</option>
  </select>
  </div>
  <div class="form-row">
    <div class="col">
      <input class="form-control" type="text" name="city" id="city">  
    </div>
    <div class="col">
    <input class="form-control" type="text" name="countrie" id="countrie">
    </div>
  </div>
  <div class="form-row">
    <div class="col">
      <input class="form-control" type="number" step=0.0000001 name="lat" id="lat">    
    </div>
    <div class="col">
      <input class="form-control" type="number" step=0.0000001 name="lng" id="lng">
    </div>
  </div>
  <div class="upload-btn-wrapper">
  <button class="btn btn-outline-secondary">Upload a file</button>
  <input type="file" name="photo" />
</div>
  <div>
    <input class="btn btn-outline-secondary" type="submit" value="Upload" id="upload-button">
  </div>
</form>




<script>
const $lat = document.getElementById("lat");
const $lng = document.getElementById("lng");
const $city = document.getElementById("city");
const $countrie = document.getElementById("countrie");

function initialize(){
  geocoder = new google.maps.Geocoder();
}

function reverseGeo(lat, lng) {
  var latlng = new google.maps.LatLng(lat, lng);
  geocoder.geocode({'latLng': latlng}, function(results, status) {
  if (status == google.maps.GeocoderStatus.OK) {
    if (results[1]) {
        for (var i=0; i<results[0].address_components.length; i++) {
          for (var b=0;b<results[0].address_components[i].types.length;b++) {
            if (results[0].address_components[i].types[b] == "administrative_area_level_1") {
                city = results[0].address_components[i];
                $city.value = city.long_name;
                break;
            }
            if (results[0].address_components[i].types[0] == "country") {
                countrie = results[0].address_components[i];
                $countrie.value = countrie.long_name;
                break;
            }
          }
        }
    } else {
      alert("No results found");
    }
  } else {
    alert("Geocoder failed due to: " + status);
  }
}); 
}

const localUser = () =>{
  return new Promise ((resolve,reject) =>{
      const sucessHandler = position => {
      const data = {
        lat: position.coords.latitude, 
        lng: position.coords.longitude,
      };
      resolve(data);
    };
    const errorHandler = error => {
      reject(error);
    };
    navigator.geolocation.getCurrentPosition(sucessHandler, errorHandler);
  });
}

localUser()
  .then(value => {
    $lat.value = value.lat;
    $lng.value = value.lng;
    reverseGeo(value.lat, value.lng);
  })
  .catch(error => {
    console.log(error);
  });

  
</script>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB2C8q98UUP2EARGKvsxn3bpuIMd2yb5bw&callback=initialize"></script>

